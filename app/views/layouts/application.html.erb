<!DOCTYPE html>
<html>
<head>
  <title>Jazzify</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <%= csrf_meta_tags %>
  <%= state_meta_tag %>

  <% if user_signed_in? %>
  <script type="text/javascript">Rollbar.configure({payload: {person: <%= raw (current_user_profile_rollbar_js) %> }});</script>
  <% end %>

  <script src="https://code.getmdl.io/1.3.0/material.min.js"></script>
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>

  <%= javascript_include_tag '//cdn.auth0.com/js/lock/10.9.1/lock.min.js' %>

  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.blue-pink.min.css">
  <%= javascript_include_tag "stepper.min", defer: true %>


  <script type="text/javascript">
    window.env = {
      "AUTH0_CLIENT_ID": "<%= ENV['AUTH0_CLIENT_ID'] %>",
      "AUTH0_DOMAIN": "<%= ENV['AUTH0_DOMAIN'] %>",
      "AUTH0_CALLBACK_URL": "<%= ENV['AUTH0_CALLBACK_URL'] %>",
    }
    var lock = new Auth0Lock(window.env.AUTH0_CLIENT_ID, window.env.AUTH0_DOMAIN, {
      auth: {
        redirectUrl: window.env.AUTH0_CALLBACK_URL,
        responseType: 'code',
        params: {
          scope: 'openid profile', // Learn about scopes: https://auth0.com/docs/scopes
          state: $('meta[name="state"]').attr('content')
        }
      }, languageDictionary: {
          title: 'Jazzify'
      }, theme: {
        logo: '<%= image_path '/jazzfestlogo.png' %>'
      }
    });
  </script>

  <% if controller_name == 'dashboard' && action_name == 'apply' %>
    <meta name="turbolinks-cache-control" content="no-cache">
  <% end %>

  <%= render 'misc/analytics' %>
</head>
<body class="mdl-color--grey-100 mdl-color-text--grey-700">
  <%= render 'layouts/page_structure' %>
  <%= render 'layouts/toast' %>
</body>
